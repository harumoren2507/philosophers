***data race(データ競合)とは

以下の条件を満たしている状態を指す。
・単一プロセス内の2つのスレッドが同じ位置に同時にアクセスすること
(つまり,排他ロックを使用していない)
・少なくとも、1つのアクセスが書き込み用であること


発生例

■ 書き込みと読み取りの競合
1つのスレッドが書き込み中に、もう一つのスレッドが読み取りを行うケース。
→どのような結果が読み取られるかが分からない。

■ 書き込みと書き込みの競合
2つのスレッドが同じメモリ位置に同時に書き込みを行うケース。
→書き込みの順序が安定しないので、結果も実行毎に変化する可能性がある。


/* コード例

int my_account = 0;
int your_account = 0;

//送金処理: データ競合(data race)あり

bool racy_tranfer(int &src, int &dest, int money)
{
    if (m <= src)
    {
        src -= m;   //未定義動作の可能性あり！
        dest += m;  //未定義動作の可能性あり!
        return (true);  //未定義動作の可能性あり!
    }
    else
        return (false);
}

//実際のスレッド呼び出し手順は省略するが、以下を別スレッドから同時に呼び出すとする
racy_transfer(your_account, my_account, 50);
racy_transfer(your_account, my_account, 80);
*/

***race condition(競合状態)とは



***deadlock(デッドロック)とは
複数のプロセス（またはスレッド）が互いにリソースを待ち合った状態に陥り、処理が進まなくなる状態

お互いが相手の作業が終わるのを待っていて、どっちも身動きが取れなくなっている状況のこと

具体例
哲学者がフォークが全部左側のやつをとってしまった結果、誰も2つのフォークを取れない待機状態が発生する。

***同一データ領域への重複したアクセス(読み込み、書き込み)はどうなるのか
→結果が未定義になる？
